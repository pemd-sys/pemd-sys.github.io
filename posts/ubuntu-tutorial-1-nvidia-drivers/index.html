<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="Ubuntu on Thinkbook Part 1 - Installing Nvidia Drivers" /><meta name="author" content="Pemd-sys" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction In this first part of the multi-part tutorial I will be walking you through some of the issues you might face while installing ubuntu 22.04 on Lenovo Thinkbook 16g2 and ways to solve common issues. The tutorials are heavily focused on issues around installing technical/simulation software and its intended audience is an advanced beginner using Ubuntu/Linux for doing scientific/technical work in linux. This also is part of my effort to document for myself the issues and solutions to installation woes and the tricks to solve it. I will provide useful references and links that i found spending hours searching for solutions to problems. Hopefully even if your laptop/desktop does not match my particular laptop specifications you will still be able to get some pointers to solving these common problems which to my experience is not quite properly documented." /><meta property="og:description" content="Introduction In this first part of the multi-part tutorial I will be walking you through some of the issues you might face while installing ubuntu 22.04 on Lenovo Thinkbook 16g2 and ways to solve common issues. The tutorials are heavily focused on issues around installing technical/simulation software and its intended audience is an advanced beginner using Ubuntu/Linux for doing scientific/technical work in linux. This also is part of my effort to document for myself the issues and solutions to installation woes and the tricks to solve it. I will provide useful references and links that i found spending hours searching for solutions to problems. Hopefully even if your laptop/desktop does not match my particular laptop specifications you will still be able to get some pointers to solving these common problems which to my experience is not quite properly documented." /><link rel="canonical" href="/posts/ubuntu-tutorial-1-nvidia-drivers/" /><meta property="og:url" content="/posts/ubuntu-tutorial-1-nvidia-drivers/" /><meta property="og:site_name" content="pemd-sys" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-01-09T00:20:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Ubuntu on Thinkbook Part 1 - Installing Nvidia Drivers" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Pemd-sys","url":"https://github.com/pemd-sys/"},"dateModified":"2023-01-09T00:20:00+00:00","datePublished":"2023-01-09T00:20:00+00:00","description":"Introduction In this first part of the multi-part tutorial I will be walking you through some of the issues you might face while installing ubuntu 22.04 on Lenovo Thinkbook 16g2 and ways to solve common issues. The tutorials are heavily focused on issues around installing technical/simulation software and its intended audience is an advanced beginner using Ubuntu/Linux for doing scientific/technical work in linux. This also is part of my effort to document for myself the issues and solutions to installation woes and the tricks to solve it. I will provide useful references and links that i found spending hours searching for solutions to problems. Hopefully even if your laptop/desktop does not match my particular laptop specifications you will still be able to get some pointers to solving these common problems which to my experience is not quite properly documented.","headline":"Ubuntu on Thinkbook Part 1 - Installing Nvidia Drivers","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/ubuntu-tutorial-1-nvidia-drivers/"},"url":"/posts/ubuntu-tutorial-1-nvidia-drivers/"}</script><title>Ubuntu on Thinkbook Part 1 - Installing Nvidia Drivers | pemd-sys</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="pemd-sys"><meta name="application-name" content="pemd-sys"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script> <script> window.MathJax = { tex: { tags: 'ams' }, svg: { fontCache: 'global' } }; </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/avatar/avatar_anon.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">pemd-sys</a></div><div class="site-subtitle font-italic">Wonder, Think, Invent, Engineer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/pemd-sys" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['73715203+pemd-sys','users.noreply.github.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Ubuntu on Thinkbook Part 1 - Installing Nvidia Drivers</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Ubuntu on Thinkbook Part 1 - Installing Nvidia Drivers</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1673223600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jan 9, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/pemd-sys/">Pemd-sys</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2111 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><h2 id="introduction"><span class="mr-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In this first part of the multi-part tutorial I will be walking you through some of the issues you might face while installing ubuntu 22.04 on Lenovo Thinkbook 16g2 and ways to solve common issues. The tutorials are heavily focused on issues around installing technical/simulation software and its intended audience is an advanced beginner using Ubuntu/Linux for doing scientific/technical work in linux. This also is part of my effort to document for myself the issues and solutions to installation woes and the tricks to solve it. I will provide useful references and links that i found spending hours searching for solutions to problems. Hopefully even if your laptop/desktop does not match my particular laptop specifications you will still be able to get some pointers to solving these common problems which to my experience is not quite properly documented.</p><p>My laptop has an AMD 5800H, 8 core APU processor along with Nvidia RTX 3060 GPU. Installing Ubuntu is fairly straight forward and there are several step-by-step tutorials<sup id="fnref:5" role="doc-noteref"><a href="#fn:5" class="footnote" rel="footnote">1</a></sup> that you can use if you are unfamiliar with the install process.</p><h2 id="motivation"><span class="mr-2">Motivation</span><a href="#motivation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>So I recently came to own a Thinkbook 16p G2 ACH<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">2</a></sup> laptop which was a great upgrade over my older dell Inspiron 15 gaming laptop<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">3</a></sup>. I needed to run some open source codes such as ElmerFEM<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">4</a></sup> which were developed in Linux. I had always wondered how Linux will fare for my technical workflow but I never got the opportunity to tinker and try, mainly because most of the technical software need software licences which you cant get when doing just hobby projects. So I decided it will be a good experiment to try linux for work and evaluating for myself if its fit for purpose for use for work as opposed to my normal use case which is for hobby coding projects. Which meant I also got to evaluate other commercial software which I normally run on windows to see how it performs in linux. So this includes the Ansys Suite and Matlab.</p><p>So, with that in mind I Downloaded the Ubuntu 22.04 LTS ISO, fired up Rufus<sup id="fnref:4" role="doc-noteref"><a href="#fn:4" class="footnote" rel="footnote">5</a></sup> to burn the ISO to a usb stick and off I went. I had originally estimated that it will probably take me 3-4 days to get everything sorted, but it took me about 2.5 weeks to get everything in a workable state. By this i mean that actually the installation of ubuntu was fairly quick and pain free but getting the scientific/technical softwares to run properly took a lot of time to figure out the right way to make it work.</p><h2 id="amd-apu-drivers"><span class="mr-2">AMD APU drivers</span><a href="#amd-apu-drivers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Since my Laptop has an AMD processor with integrated GPU it is wise to install the APU drivers first and then install the GPU drivers. This is because if the Nvidia driver detects another GPU it will have options to dynamically switch which GPU to use, something call a <em>prime</em> profile.</p><p>However it’s quite confusing to figure out which .deb file to download and install as per the <a href="https://amdgpu-install.readthedocs.io/en/latest/install-prereq.html">AMD gpu help page</a>. Searching for drivers on the <a href="https://www.amd.com/en/support">AMD GPU drivers web-site</a> leads to no joy since I could not find the processor in the list. So, instead I navigated to the <a href="http://repo.radeon.com/amdgpu-install/latest/">AMD driver Repository</a> and navigated to the particular version of Ubuntu that I had <a href="http://repo.radeon.com/amdgpu-install/latest/ubuntu/jammy/">jammy Jellyfish</a>. So, interestingly at the time of my install and indeed the publication of the post here, there was some issue in the latest version of AMD drivers and the driver file version that shows up is amdgpu-install_5.4.50400-1_all.deb. However, I found out while searching on this issue that AMD has the wrong version of driver in the latest folder. Haha, go figure. So instead we have to go to the main folder in the <a href="http://repo.radeon.com/amdgpu-install/">AMD repo</a> and select the highest version number of driver available which at the time of publication was <a href="http://repo.radeon.com/amdgpu-install/22.20.5/ubuntu/jammy/amdgpu-install_22.20.50205-1_all.deb">22.20.4</a> released on 10-Nov-2022. Other versions will appear as they are made so do double check the version number you are getting because the driver under latest folder does not seem to have the right version number currently. To install use the following commands as a guide. Also do read this document from <a href="https://www.amd.com/en/support/kb/faq/amdgpu-installation">AMD</a> on the linux installation process.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get upgrade
<span class="nb">sudo </span>apt-get dist-upgrade
<span class="nb">sudo </span>apt-get <span class="nt">-y</span> <span class="nb">install </span>build-essential
<span class="nb">sudo </span>apt-get <span class="nt">-y</span> <span class="nb">install </span>dkms

<span class="nb">cd</span> ~Downloads/
wget https://repo.radeon.com/amdgpu-install/22.20.5/ubuntu/jammy/amdgpu-install_22.20.50205-1_all.deb

<span class="nb">sudo </span>dpkg <span class="nt">-i</span> amdgpu-install_22.20.50205-1_all.deb 
<span class="nb">sudo </span>amdgpu-install <span class="nt">--usecase</span><span class="o">=</span>graphics,opencl <span class="nt">--vulkan</span><span class="o">=</span>amdvlk,pro

</pre></table></code></div></div><p>To check if the install has gone swimmingly, check the install using the following commands.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="nv">$ </span>glxinfo | <span class="nb">grep</span> <span class="nt">-iE</span> <span class="s1">'vendor:|device:|version:'</span>
    Vendor: AMD Radeon Software
    Device: Mesa DRI Radeon RX 570 <span class="o">(</span>0x166<span class="o">)</span>
    Version: 21.1.5

<span class="nv">$ </span>modinfo amdgpu
  filename:       /lib/modules/5.15.0-56-generic/updates/dkms/amdgpu.ko
  version:        5.16.9.22.20
  license:        GPL and additional rights
  description:    AMD GPU
  author:         AMD linux driver team

</pre></table></code></div></div><p>If you have discrete graphics card from AMD use a similar process but use the amdgpu-pro installer and perhaps an instruction page from <a href="https://www.dell.com/support/kbdoc/en-uk/000146175/installing-and-configuring-amdgpu-pro-in-ubuntu-16-04-linux">Dell</a> can help you.</p><h2 id="nvidia-drivers"><span class="mr-2">Nvidia Drivers</span><a href="#nvidia-drivers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Off-the-shelf Ubuntu detects the GPU but installs only the Nvidia Nouveau driver<sup id="fnref:6" role="doc-noteref"><a href="#fn:6" class="footnote" rel="footnote">6</a></sup>. This is ok if you are just using the laptop for productivity work but if you are interested in machine learning or GPU based compute then installing the correct proprietary Nvidia Driver is a must. Fortunately Nvidia provides a step-by-step tutorial on how to install. What I found about the instructions are that they are too detailed and give too many options that can easily confuse a reader who is trying to quickly install the drivers. So, I have listed the steps I did so that you can use that as a guide. Please use the actual instructions on the Nvidia page as they get updated regularly, and use my instructions only to navigate through the install process.</p><p>What I found was the easiest way to install the Nvidia drivers on Ubuntu is to follow the package manager installation guide within the overall install guide. There are other options to install the drivers namely using the <em>runfile</em> method but I found this to be easier and hassle-free.</p><p>The first thing to do is to double check that you have <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#pre-installation-actions">nvidia GPU installed</a> and the system pre-requisites are met and you know the distribution and release number of your linux kernel.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>lspci | <span class="nb">grep</span> <span class="nt">-i</span> nvidia
<span class="nb">uname</span> <span class="nt">-m</span> <span class="o">&amp;&amp;</span> <span class="nb">cat</span> /etc/<span class="k">*</span>release

</pre></table></code></div></div><p>You can then follow the rest of the steps in the nvidia ubuntu installation using the package manager <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#prepare-ubuntu">guidelines</a> as shown below. Change the distro and arch to reflect the particulars of your system config found using the above steps. After that we use the <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#driver-installation">apt command to install the cuda package</a> (which installs the nvidia drivers as well) and the gds package.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-key del 7fa2af80
<span class="nb">export </span><span class="nv">distro</span><span class="o">=</span>ubuntu2204
<span class="nb">export arch</span><span class="o">=</span>x86_64
wget https://developer.download.nvidia.com/compute/cuda/repos/<span class="nv">$distro</span>/<span class="nv">$arch</span>/cuda-keyring_1.0-1_all.deb
<span class="nb">sudo </span>dpkg <span class="nt">-i</span> cuda-keyring_1.0-1_all.deb
<span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nb">install </span>cuda
<span class="nb">sudo </span>apt-get <span class="nb">install </span>nvidia-gds

</pre></table></code></div></div><p>if you are using python to do machine learning and accessing the cuda toolbox follow the steps in this <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#pip-wheels">link</a> to pip install the necessary packages.</p><p>Once done we have to make sure the cuda installed location is available on path by following the <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#post-installation-actions">post installation steps</a>.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># add to .bashrc</span>
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda-12.0/bin<span class="k">${</span><span class="nv">PATH</span>:+:<span class="k">${</span><span class="nv">PATH</span><span class="k">}}</span>
</pre></table></code></div></div><p>Reboot your system and see if the desktop launches. Check you nvidia driver install by running the following command and observing a similar response as seen below.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="nv">$ </span>nvidia-smi
Tue Jan 10 01:04:39 2023       
    +-----------------------------------------------------------------------------+
    | NVIDIA-SMI 525.60.13    Driver Version: 525.60.13    CUDA Version: 12.0     |
    |-------------------------------+----------------------+----------------------+
    | GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
    | Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
    |                               |                      |               MIG M. |
    |<span class="o">===============================</span>+<span class="o">======================</span>+<span class="o">======================</span>|
    |   0  NVIDIA GeForce ...  On   | 00000000:01:00.0 Off |                  N/A |
    | N/A   43C    P8     9W /  N/A |      6MiB /  6144MiB |      0%      Default |
    |                               |                      |                  N/A |
    +-------------------------------+----------------------+----------------------+
                                                                                
    +-----------------------------------------------------------------------------+
    | Processes:                                                                  |
    |  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
    |        ID   ID                                                   Usage      |
    |<span class="o">=============================================================================</span>|
    |    0   N/A  N/A      3089      G   /usr/lib/xorg/Xorg                  4MiB |
    +-----------------------------------------------------------------------------+

</pre></table></code></div></div><p>If you have problems after install and you want to revert to the original nouveau drivers using the following commands to purge the system of the proprietary nvidia drivers.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get <span class="nt">--purge</span> remove <span class="s2">"*cuda*"</span> <span class="s2">"*cublas*"</span> <span class="s2">"*cufft*"</span> <span class="s2">"*cufile*"</span> <span class="s2">"*curand*"</span>  <span class="s2">"*cusolver*"</span> <span class="s2">"*cusparse*"</span> <span class="s2">"*gds-tools*"</span> <span class="s2">"*npp*"</span> <span class="s2">"*nvjpeg*"</span> <span class="s2">"nsight*"</span> <span class="s2">"*nvvm*"</span>
<span class="nb">sudo </span>apt-get <span class="nt">--purge</span> remove <span class="s2">"*nvidia*"</span> <span class="s2">"libxnvctrl*"</span>
<span class="nb">sudo </span>apt-get autoremove
<span class="nb">sudo </span>apt autoremove
</pre></table></code></div></div><h3 id="nvidia-brightness-bug---attempt-1"><span class="mr-2">Nvidia Brightness Bug - Attempt 1</span><a href="#nvidia-brightness-bug---attempt-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>After installation of the nvidia drivers everything worked well except for the brightness control using the keyboard function key. The display was frozen to max. brightness<sup id="fnref:7" role="doc-noteref"><a href="#fn:7" class="footnote" rel="footnote">7</a></sup><sup id="fnref:8" role="doc-noteref"><a href="#fn:8" class="footnote" rel="footnote">8</a></sup><sup id="fnref:9" role="doc-noteref"><a href="#fn:9" class="footnote" rel="footnote">9</a></sup><sup id="fnref:10" role="doc-noteref"><a href="#fn:10" class="footnote" rel="footnote">10</a></sup>. Initially I was very disappointed as the screen was burning my retinas so I hit stack-overflow and came up with a dirty hacky way to reduced back-light running the command line. Note that if you have lcd or equivalent screens the reducing the back-light intensity reduces the brightness using the backlight brightness below using the echo to set the brightness number. If however you have oled screens you have the change the brightness by changing the contrast using the xrandr command below. To use the xrandr command you have to first determine the current screen you are using. For my laptop it was using the eDP for the laptop screen.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c"># for LCD etc</span>
<span class="nb">echo </span>40 | <span class="nb">sudo tee</span> /sys/class/backlight/amdgpu_bl0/brightness

<span class="c"># find out actual brightness setting</span>
<span class="nb">cat</span> /sys/class/backlight/amdgpu_bl0/actual_brightness

<span class="c"># find out max brightness supported by the display</span>
<span class="nb">cat</span> /sys/class/backlight/amdgpu_bl0/max_brightness 


<span class="c"># for OLEDs</span>
xrandr <span class="nt">--current</span> <span class="nt">--verbose</span>
xrandr <span class="nt">--output</span> eDP <span class="nt">--brightness</span> 0.5
</pre></table></code></div></div><h3 id="nvidia-brightness-bug---attempt-2"><span class="mr-2">Nvidia Brightness Bug - Attempt 2</span><a href="#nvidia-brightness-bug---attempt-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Using the <a href="https://forums.developer.nvidia.com/t/brightness-not-working-after-upgrading-to-ubuntu-22-04/224227">instruction</a> originally the changes proposed to grub did not work for me. So I did a bit of hit-and-trial to get the final configuration when re-enabled the back-light control on my laptop.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/default/grub

<span class="c"># edit the following line in grub file and save using &lt;esc&gt;:wq to write the modified file</span>
<span class="nv">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="o">=</span><span class="s2">"quiet splash amdgpu.backlight=0 nvidia.NVreg_RegistryDwords=EnableBrightnessControl=1 acpi_backlight=video"</span>

<span class="nb">sudo </span>update-grub
<span class="nb">sudo </span>reboot

</pre></table></code></div></div><p>After reboot check again whether the brightness control is working either through the keyboard shortcut or through the ubuntu display settings.</p><h3 id="check-nvidia-install"><span class="mr-2">Check Nvidia Install</span><a href="#check-nvidia-install" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Ok, so now you are happy that the computer isn’t doing something funny, we should cross-check that the nvidia driver has actually been successfully installed.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="c"># after reboot install mesa-utils to run glxgears program</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>mesa-utils

<span class="c"># check which gpu in control </span>
<span class="nv">$ </span>prime-select <span class="nt">--help</span>
    Usage: /usr/bin/prime-select nvidia|intel|on-demand|query

<span class="nv">$ </span>prime-select query
    on-demand

<span class="c"># test graphics performance by running a simple opengl gears program</span>
glxgears <span class="nt">-info</span>

<span class="nb">sudo </span>apt-get <span class="nb">install </span>clinfo

nvidia-smi
glxinfo | <span class="nb">grep</span> <span class="s2">"OpenGL renderer"</span>
glxinfo | <span class="nb">grep</span> <span class="nt">-iE</span> <span class="s1">'vendor:|device:|version:'</span>

lspci | <span class="nb">grep</span> <span class="nt">-i</span> nvidia
lsmod | <span class="nb">grep </span>nvidia
<span class="nb">sudo </span>lshw <span class="nt">-c</span> video
lspci <span class="nt">-nnk</span> | egrep <span class="nt">-i</span> <span class="nt">--color</span> <span class="s1">'vga|3d|2d'</span> <span class="nt">-A3</span> | <span class="nb">grep</span> <span class="s1">'in use'</span>

</pre></table></code></div></div><h3 id="check-gpu-switching"><span class="mr-2">Check GPU Switching</span><a href="#check-gpu-switching" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>As the system has 2 GPUs one on the Ryzen 7 APU and the other the discrete Nvidia graphics card, we need to check that we can select or rather force-select which GPU to use. Use the following lines to select and then check if the driver has taken control of the display. Its to be noted that in the prime-select option, to select the Ryzen APU as the GPU you actually have to use prime-select intel and not prime-select amd. The authors of prime-select i guess couldn’t be bothered to change the vendor name to AMD. Regardless, choosing intel means choosing the cpu integrated GPU for graphics rendering and prime-select nvidia selects the discrete GPU.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c"># test by switching gpu to amd</span>
<span class="nb">sudo </span>prime-select intel
<span class="nb">sudo </span>reboot

<span class="c"># check to see the AMD graphics in charge</span>
glxinfo |grep vendor

<span class="c"># change to Nvidia and check again.</span>
<span class="nb">sudo </span>prime-select nvidia
<span class="nb">sudo </span>reboot

<span class="c"># check to see the Nvidia graphics in charge</span>
glxinfo |grep vendor

</pre></table></code></div></div><h2 id="other-unsorted-references"><span class="mr-2">Other Unsorted References</span><a href="#other-unsorted-references" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>https://docs.nvidia.com/deploy/cuda-compatibility/index.html<li>https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#ubuntu<li>https://www.omgubuntu.co.uk/2022/06/fix-apt-key-deprecation-error-on-ubuntu<li>https://askubuntu.com/questions/1406420/cant-change-brightness-on-version-22-04<li>https://askubuntu.com/questions/23238/how-can-i-find-what-video-driver-is-in-use-on-my-system<li>https://www.reddit.com/r/Ubuntu/comments/ttwm5y/install_specific_cuda_version_112_ubuntu_24044_lts/<li>https://gist.github.com/Mahedi-61/2a2f1579d4271717d421065168ce6a73<li>https://linuxconfig.org/how-to-check-cuda-version-on-ubuntu-20-04-focal-fossa-linux<li>https://askubuntu.com/questions/1417418/unmet-dependencies-ubuntu-22-04-amdgpu-hip-support<li>https://community.amd.com/t5/drivers-software/cannot-run-amdgpu-install-on-ubuntu-22-04-1/td-p/561053<li>https://askubuntu.com/questions/1417418/unmet-dependencies-ubuntu-22-04-amdgpu-hip-support<li>https://repo.radeon.com/amdgpu/<li>https://wiki.gentoo.org/wiki/AMDGPU#Hardware_detection<li>https://wiki.archlinux.org/title/PRIME<li>https://askubuntu.com/questions/40779/how-do-i-install-a-deb-file-via-the-command-line<li>https://linuxhint.com/ubuntu_dpkg_installation/<li>https://linuxconfig.org/amd-radeon-ubuntu-20-04-driver-installation<li>https://www.amd.com/en/support/kb/faq/amdgpu-installation<li>https://github.com/nvidia/cuda-samples<li>https://forum.manjaro.org/t/brightness-control-and-165hz-monitor-not-working-on-lenovo-legion-5-pro/61314<li>https://gist.github.com/wangruohui/df039f0dc434d6486f5d4d098aa52d07<li>https://installati.one/install-dkms-ubuntu-22-04/<li>https://askubuntu.com/questions/1329928/legion-5-pro-brightness-control-doesnt-work-on-ubuntu-20-04-with-nvidia-driver<li>https://github.com/systemd/systemd/issues/24223<li>https://gitlab.freedesktop.org/drm/amd/-/issues/1671<li>https://patchwork.kernel.org/project/platform-driver-x86/patch/20220316012516.2233984-1-ddadap@nvidia.com/<li>https://unix.stackexchange.com/questions/691614/changing-brightness-only-works-after-system-resumes-from-sleep<li>https://www.linuxcapable.com/how-to-install-linux-mainline-kernel-on-ubuntu-22-04-lts/<li>https://www.addictivetips.com/ubuntu-linux-tips/downgrade-ubuntu-kernel/<li>https://forums.developer.nvidia.com/t/brightness-not-working-after-upgrading-to-ubuntu-22-04/224227<li>https://www.amd.com/en/support/kb/release-notes/rn-amdgpu-unified-linux-20-20<li>https://amdgpu-install.readthedocs.io/en/latest/install-installing.html<li><p>https://askubuntu.com/questions/1124253/missing-firmware-for-amdgpu</p><li>https://www.amd.com/en/support/kb/release-notes/rn-amdgpu-unified-linux-22-40<li>https://community.amd.com/t5/drivers-software/ubuntu-20-04-4-driver-21-50-installation-fails/m-p/513502#M153242<li>https://repo.radeon.com/amdgpu-install/22.20.5/ubuntu/focal/</ul><h2 id="references"><span class="mr-2">References</span><a href="#references" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="footnotes" role="doc-endnotes"><ol><li id="fn:5" role="doc-endnote"><p><a href="https://phoenixnap.com/kb/ubuntu-22-04-lts">How to install Ubuntu</a> <a href="#fnref:5" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:1" role="doc-endnote"><p><a href="https://www.notebookcheck.net/Lenovo-ThinkBook-16p-in-laptop-review-A-crowd-pleaser-if-you-re-ready-for-some-compromises.560656.0.html">Thinkbook 16p Specs</a> <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:2" role="doc-endnote"><p><a href="https://www.notebookcheck.net/Dell-Inspiron-15-7000-7567-Gaming-Notebook-Review.196454.0.html">Dell Inspiron 15 7567</a> <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:3" role="doc-endnote"><p><a href="http://www.elmerfem.org/blog/">ElmerFEM</a> <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:4" role="doc-endnote"><p><a href="https://rufus.ie/en/">Rufus</a> <a href="#fnref:4" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:6" role="doc-endnote"><p><a href="https://www.cyberciti.biz/faq/ubuntu-linux-install-nvidia-driver-latest-proprietary-driver/">Ubuntu Nvidia Install</a> <a href="#fnref:6" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:7" role="doc-endnote"><p><a href="https://forums.developer.nvidia.com/t/brightness-not-working-after-upgrading-to-ubuntu-22-04/224227">Nvidia Brightness Issue</a> <a href="#fnref:7" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:8" role="doc-endnote"><p><a href="https://patchwork.kernel.org/project/platform-driver-x86/patch/20220316012516.2233984-1-ddadap@nvidia.com/">Linux nvidia-wmi-ec-backlight issue</a> <a href="#fnref:8" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:9" role="doc-endnote"><p><a href="https://github.com/systemd/systemd/issues/24223">systemd-Backlight issue</a> <a href="#fnref:9" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:10" role="doc-endnote"><p><a href="https://unix.stackexchange.com/questions/691614/changing-brightness-only-works-after-system-resumes-from-sleep">Stackexchange Brightness Issue</a> <a href="#fnref:10" class="reversefootnote" role="doc-backlink">&#8617;</a></p></ol></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/ubuntu/'>Ubuntu</a>, <a href='/categories/ubuntu-tutorial/'>Ubuntu-Tutorial</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/installation/" class="post-tag no-text-decoration" >Installation</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Ubuntu+on+Thinkbook+Part+1+-+Installing+Nvidia+Drivers+-+pemd-sys&url=%2Fposts%2Fubuntu-tutorial-1-nvidia-drivers%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Ubuntu+on+Thinkbook+Part+1+-+Installing+Nvidia+Drivers+-+pemd-sys&u=%2Fposts%2Fubuntu-tutorial-1-nvidia-drivers%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2Fubuntu-tutorial-1-nvidia-drivers%2F&text=Ubuntu+on+Thinkbook+Part+1+-+Installing+Nvidia+Drivers+-+pemd-sys" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/installation/">Installation</a> <a class="post-tag" href="/tags/electronics/">Electronics</a> <a class="post-tag" href="/tags/equations/">Equations</a> <a class="post-tag" href="/tags/examples/">Examples</a> <a class="post-tag" href="/tags/writing/">writing</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ufw-setup-and-configuration/"><div class="card-body"> <em class="small" data-ts="1673569200" data-df="ll" > Jan 13, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Installing and configuring UfW</h3><div class="text-muted small"><p> Introduction UfW is un complicated firewall. Here is how to configure it properly References</p></div></div></a></div><div class="card"> <a href="/posts/Modelsim-ubuntu-docker/"><div class="card-body"> <em class="small" data-ts="1673655600" data-df="ll" > Jan 14, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Installing and configuring Modelsim on docker</h3><div class="text-muted small"><p> Introduction Modelsim is used for simulating vhdl codes. However it has a bunch of 32 bit dependencies and I was worried if it will break my system’s other dependencies. So i decided to write a doc...</p></div></div></a></div><div class="card"> <a href="/posts/docker-part-1-installation/"><div class="card-body"> <em class="small" data-ts="1673655600" data-df="ll" > Jan 14, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Docker Part 1 - Installation</h3><div class="text-muted small"><p> Introduction Placeholder for docker installation for scientific software like Ansys. References Ansys docker [3]:https://www.cfd-online.com/Forums/ansys/231493-ansys-installation-docker-container...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/blog-tutorial-4-commenting/" class="btn btn-outline-primary" prompt="Older"><p>Blog Tutorial 4 - Adding Discussions</p></a> <a href="/posts/Vivado-board-file-management/" class="btn btn-outline-primary" prompt="Newer"><p>Vivado Board File Management</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "pemd-sys/pemd-sys.github.io", "data-repo-id": "MDEwOlJlcG9zaXRvcnkzMjIxMzI0NTM=", "data-category": "General", "data-category-id": "MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMTcyMDA1", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/installation/">Installation</a> <a class="post-tag" href="/tags/electronics/">Electronics</a> <a class="post-tag" href="/tags/equations/">Equations</a> <a class="post-tag" href="/tags/examples/">Examples</a> <a class="post-tag" href="/tags/writing/">writing</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/username">pemd-sys</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
